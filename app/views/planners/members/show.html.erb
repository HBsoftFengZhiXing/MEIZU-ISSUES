<% content_for:sidebar do %>
  <div class="well sidebar-nav">
    <ul class="nav nav-list" id="slideRight" ng-controller="MemberCtrl">
      <li class="form-horizontal head">
          <h5 style="display:inline-block;"><%= @member.name %></h5>
          <div style="display:inline-block;padding:10px;" class="pull-right"><img src="/assets/project_header/down.png" alt="down"/></div>
      </li>
      <li>
        <a href="#">
          <img src="<%= @member.user.avatar_url(:large) %>" class="img-polaroid" style="height:135px;width:95%;">
        </a>
      </li>
      <li class="head">
        <h5 style="display:inline-block;">Projects</h5>
      </li>
      <li class="head">        
        <% @projects.each do |project| %>
          <div class="clearfix">
            <a class="photo" href="/planners/projects/<%= project.id %>">
              <img class="img-circle" src="<%= project.icon_url(:medium) %>" style="width:50px;">
            </a>            
            <div style="margin-left:5px;">
              <a class="name" href="/planners/projects/<%= project.id %>"><%= project.name %></a>
            </div>          
          </div>
        <% end %>
      </li>
    </ul>
  </div><!--/.well -->
  
<% end -%>

<div id='calendar'>
  
  <div class="row-fluid grid img-polaroid">
    <div  class="span12">
      <div class="row-fluid">
        <div class="span4">
          <h3>{{ currentMonth.getFullYear()}} - {{ currentMonth.getMonth() }}</h3>
        </div>
        <div class="span3 offset5">
          <div class="header">
            <nav>  
              <div class="btn-group">
                <button class=" btn" ng-click="prevMonth();">◀</button>
                <button class="btn" ng-click="today();">今天</button>                
                <button class=" btn" ng-click="nextMonth();">▶</button>                
              </div>
            </nav>      
          </div>  
        </div>
      </div>  
    </di>
  </div>      
  
  <div class="days-of-month date img-polaroid">
    <div class="day-header {{ day.dateOjbect.getDay()%6==0  && 'sun-color-date' || '' }}" ng-repeat="day in days">{{ day.day }}</div>          
  </div>
  
  <%#= render :partial => "planners/members/calendar" %>            
  <div class="month-row" ng-repeat="event in eventsInMonth = (events | filterByMonth:currentMonth  ) ">
    <div class="events holdable" style="width:100%;" >                          
      <div >
        <div  class="event-row task" >
          <div style="background-color:#000;width:{{ event.conflictWidth }};left:{{ event.conflictLeft }};position:absolute;z-index:100;top:11px;"  data-event-id="{{event.id}}">
            <span style="visibility:hidden;">conflict</span>
          </div>
        
          <div  class="event  tip wraps_next Task" style="left:{{event.left}};width:{{event.width}};" data-event-id="{{event.id}}"   data-toggle="tooltip" title="{{ event.startTime }} - {{event.endTime }}">   
                   
            <span  class="event">
              <span class="title">{{ event.projectName }}</span>
            </span>
        
          </div>  
        </div>
        <div class="spacer"></div>
      </div>            
    </div> 
                
    <div class="days" >            
      <div class="dates" style="display:table-row;">
        <div class="day {{ day.dateOjbect.getDay()%6==0  && 'sat' || '' }}" ng-repeat="day in days" data-date="{{day.year}}-{{day.month}}-{{day.day}}" >
        </div>
      </div>
    </div>   
  
  </div>
  
  <div class="month-row no-events">
    <div class="days" ginkgo-droppable="true"  style="min-height:{{  500 - (eventsInMonth.length * 30)}}px;">            
      <div class="day {{ day.dateOjbect.getDay()%6==0  && 'sat' || '' }}" ng-repeat="day in days" data-date="{{day.year}}-{{day.month}}-{{day.day}}" style="height:{{  500 - (eventsInMonth.length * 30)}}px;">
      </div>
    </div>   
  </div>     
  
  <div class="days-of-month date img-polaroid">
    <div class="day-header {{ day.dateOjbect.getDay()%6==0  && 'sun-color-date' || '' }}" ng-repeat="day in days">{{ day.day }}</div>          
  </div>
  
</div>      
